# Application
quarkus.application.name=redhat-weather-service
quarkus.application.version=1.0.0-SNAPSHOT

# HTTP
quarkus.http.port=8090
quarkus.http.host=0.0.0.0

# CORS - Allow frontend to access API
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:5173,http://localhost:8080,http://localhost:3000
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,content-type,x-requested-with,authorization
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-allow-credentials=true

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=weather
quarkus.datasource.password=weather
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5438/weather_db
quarkus.datasource.jdbc.min-size=5
quarkus.datasource.jdbc.max-size=20

# Hibernate ORM
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.sql-load-script=no-file
quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0
quarkus.flyway.locations=db/migration
quarkus.flyway.create-schemas=false
quarkus.flyway.validate-on-migrate=true

# REST Clients - NOAA Weather API
quarkus.rest-client.noaa-api.url=https://api.weather.gov
quarkus.rest-client.noaa-api.scope=jakarta.inject.Singleton
quarkus.rest-client.noaa-api.read-timeout=15000
quarkus.rest-client.noaa-api.connect-timeout=5000
# NOAA requires User-Agent header
quarkus.rest-client.noaa-api.headers.User-Agent=redhat-weather-service/1.0 (contact@redhat.com)

# REST Clients - Aviation Weather Center
quarkus.rest-client.aviation-weather-api.url=https://aviationweather.gov
quarkus.rest-client.aviation-weather-api.scope=jakarta.inject.Singleton
quarkus.rest-client.aviation-weather-api.read-timeout=20000
quarkus.rest-client.aviation-weather-api.connect-timeout=5000

# REST Clients - National Hurricane Center
quarkus.rest-client.nhc-api.url=https://www.nhc.noaa.gov
quarkus.rest-client.nhc-api.scope=jakarta.inject.Singleton
quarkus.rest-client.nhc-api.read-timeout=15000
quarkus.rest-client.nhc-api.connect-timeout=5000

# REST Clients - OpenWeatherMap
quarkus.rest-client.openweather-api.url=https://api.openweathermap.org
quarkus.rest-client.openweather-api.scope=jakarta.inject.Singleton
quarkus.rest-client.openweather-api.read-timeout=10000
quarkus.rest-client.openweather-api.connect-timeout=5000

# OpenWeatherMap API Key (set via environment variable)
openweather.api.key=${OPENWEATHER_API_KEY:}

# Scheduler Configuration
quarkus.scheduler.enabled=true
weather.scheduler.noaa.enabled=true
weather.scheduler.aviation.enabled=true
weather.scheduler.hurricane.enabled=true
weather.scheduler.openweather.enabled=false

# Data Cleanup Configuration
weather.data.retention.days=7
weather.data.cleanup.days=30

# OpenAPI/Swagger Configuration
quarkus.smallrye-openapi.path=/openapi
quarkus.smallrye-openapi.info-title=Red Hat Weather Service API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API for weather data aggregation from multiple sources
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.enable=true

# Health Checks
quarkus.smallrye-health.root-path=/q/health

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.console.enable=true
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.console.level=INFO

# Application-specific logging
quarkus.log.category."com.redhat.weather".level=DEBUG
quarkus.log.category."com.redhat.weather.scheduler".level=INFO
quarkus.log.category."com.redhat.weather.client".level=DEBUG
quarkus.log.category."org.hibernate.SQL".level=DEBUG
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".min-level=TRACE

# JSON Configuration
quarkus.jackson.serialization-inclusion=non-null
quarkus.jackson.fail-on-unknown-properties=false
quarkus.jackson.write-dates-as-timestamps=false

# Airport CSV Data Loading
airport.csv.path=./data/airports.csv
airport.csv.load-on-startup=true
airport.csv.skip-if-exists=true

# Development Mode (Dev Services)
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5438/weather_db
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.log.category."com.redhat.weather".level=DEBUG

# Test Profile
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test
%test.quarkus.flyway.migrate-at-start=true

# Production Profile
%prod.quarkus.log.level=WARN
%prod.quarkus.log.category."com.redhat.weather".level=INFO
%prod.quarkus.hibernate-orm.log.sql=false
